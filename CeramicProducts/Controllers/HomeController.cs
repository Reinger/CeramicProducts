using System;
using System.Web.Mvc;

namespace CeramicProducts.Controllers
{
    public class HomeController : Controller
    {
        //Метод для визуализации главной страницы
        [HttpGet]
        public ActionResult Index()
        {
            //Название страницы
            ViewBag.Title = "Керамические изделия";
            return View();
        }

        //Метод, получает 15 параметров от пользователя, поизводит вычисления и передает представлению результат
        [HttpPost]
        public ActionResult Index(int X1, string X2, string X3, string X4, string X5, string X6, string X7, string X8, string X9, string X10, string X11, string X12, string X13, string X14, string X15)
        {
            //Преобразуем параметры из строкового типа в тип double (вещественный) и передаем методу для вычисления вероятности результата
            double value = GetResult(double.Parse(X1.ToString()), double.Parse(X2.Replace('.', ',')), double.Parse(X3.Replace('.', ',')), double.Parse(X4.Replace('.', ',')), double.Parse(X5.Replace('.', ',')),
                double.Parse(X6.Replace('.', ',')), double.Parse(X7.Replace('.', ',')), double.Parse(X8.Replace('.', ',')), double.Parse(X9.Replace('.', ',')), double.Parse(X10.Replace('.', ',')),
                 double.Parse(X11.Replace('.', ',')), double.Parse(X12.Replace('.', ',')), double.Parse(X13.Replace('.', ',')), double.Parse(X14.Replace('.', ',')), double.Parse(X15.Replace('.', ',')));
            //Передаем результат брака представлению
            ViewBag.Value = value.ToString("f2");
            //Название страницы
            ViewBag.Title = "Керамические изделия";
            return View();
        }


        //Метод для вычисления вероятности брака, по формуле
        private double GetResult(double X1, double X2, double X3, double X4, double X5, double X6, double X7, double X8, double X9, double X10, double X11, double X12, double X13, double X14, double X15)
        {
            //Формула для получения вероятности брака
            double result = (0.954445808516994 * Math.Tanh(39.9188211950286 * Math.Tanh(5.64723023958692 * (0.434782608695652 * X1 - 1.39130434782609) - 8.75870836860863 * (0.29171528588098 * X2 - 6.66044340723454) + 5.33801191729324 *
                (0.034441191665232 * X3 - 1.85241949371448) + 4.28438707470747 * (0.034129692832765 * X4 - 2.19453924914676) - 1.02226492798313 * (0.114285714285714 * X5 - 2.88571428571429) + 1.28859181700271 * (0.121212121212121 *
                X6 - 3.15757575757576) - 1.06867095129049 * (0.071718004805106 * X7 - 2.11471294868577) + 0.192524148958494 * (0.012191702327396 * X8 - 1.00504736476354) - 0.2459009495679 * (0.234466588511137 * X9 - 1.0820633059789) -
                2.95613468588617 * (0.027130195093233 * X10 - 1.02661472138646) - 1.71687521018198 * (2.35294117647059 * X11 - 4.17647058823529) - 12.336287385743 * (0.038834951456311 * X12 - 2.92233009708738) - 0.552180110868824 *
                (0.169779286926995 * X13 - 1.22920203735144) + 4.00884528736378 * (0.032420165342843 * X14 - 1.18252553088021) + 0.220450891956419 * (0.013377926421405 * X15 - 1.04173913043478) - 4.75053369303951) - 43.4727222421197 *
                Math.Tanh(-0.567659308083002 * (0.434782608695652 * X1 - 1.39130434782609) - 0.553062728357258 * (0.29171528588098 * X2 - 6.66044340723454) - 0.312231205485264 * (0.034441191665232 * X3 - 1.85241949371448) + 0.616873155513801 *
                (0.034129692832765 * X4 - 2.19453924914676) - 1.74242637972895 * (0.114285714285714 * X5 - 2.88571428571429) + 2.48891626866938 * (0.121212121212121 * X6 - 3.15757575757576) + 0.938417954989087 * (0.071718004805106 * X7 -
                2.11471294868577) - 1.07115825593857 * (0.012191702327396 * X8 - 1.00504736476354) - 1.09916639271492 * (0.234466588511137 * X9 - 1.0820633059789) - 5.39493169549714 * (0.027130195093233 * X10 - 1.02661472138646) -
                2.95584907781086 * (2.35294117647059 * X11 - 4.17647058823529) - 0.500146311631063 * (0.038834951456311 * X12 - 2.92233009708738) + 5.73137323032437 * (0.169779286926995 * X13 - 1.22920203735144) - 4.84442238465072 *
                (0.032420165342843 * X14 - 1.18252553088021) + 0.471719073749303 * (0.013377926421405 * X15 - 1.04173913043478) - 4.52735857695519) - 55.7799563697814 * Math.Tanh(1.5508659994341 * (0.434782608695652 * X1 - 1.39130434782609) -
                1.04989632256649 * (0.29171528588098 * X2 - 6.66044340723454) + 1.24576624754038 * (0.034441191665232 * X3 - 1.85241949371448) - 0.209462556537247 * (0.034129692832765 * X4 - 2.19453924914676) + 1.06273941351921 *
                (0.114285714285714 * X5 - 2.88571428571429) - 1.64862085359311 * (0.121212121212121 * X6 - 3.15757575757576) - 0.553953812393557 * (0.071718004805106 * X7 - 2.11471294868577) + 0.723837634664833 * (0.012191702327396 * X8 -
                1.00504736476354) + 0.441605592143161 * (0.234466588511137 * X9 - 1.0820633059789) + 3.95757876868551 * (0.027130195093233 * X10 - 1.02661472138646) - 0.705498527323558 * (2.35294117647059 * X11 - 4.17647058823529) -
                0.149800387173688 * (0.038834951456311 * X12 - 2.92233009708738) + 1.15374386650418 * (0.169779286926995 * X13 - 1.22920203735144) + 0.345841677811784 * (0.032420165342843 * X14 - 1.18252553088021) - 0.116684975756516 *
                (0.013377926421405 * X15 - 1.04173913043478) + 4.01373231491604) + 42.1748171392136 * Math.Tanh(-3.77756511834636 * (0.434782608695652 * X1 - 1.39130434782609) - 6.50465731694393 * (0.29171528588098 * X2 - 6.66044340723454) +
                14.7989721642936 * (0.034441191665232 * X3 - 1.85241949371448) - 1.86102152038641 * (0.034129692832765 * X4 - 2.19453924914676) - 1.10145244193151 * (0.114285714285714 * X5 - 2.88571428571429) + 4.61659810409197 *
                (0.121212121212121 * X6 - 3.15757575757576) + 1.88760242146928 * (0.071718004805106 * X7 - 2.11471294868577) - 6.10103649433718 * (0.012191702327396 * X8 - 1.00504736476354) - 0.298876385486569 * (0.234466588511137 * X9 -
                1.0820633059789) + 0.544061482253148 * (0.027130195093233 * X10 - 1.02661472138646) - 25.8436689738962 * (2.35294117647059 * X11 - 4.17647058823529) + 8.24092333341293 * (0.038834951456311 * X12 - 2.92233009708738) +
                13.3412646195754 * (0.169779286926995 * X13 - 1.22920203735144) - 15.9091863460831 * (0.032420165342843 * X14 - 1.18252553088021) - 3.10040940131497 * (0.013377926421405 * X15 - 1.04173913043478) - 4.52726176147806) +
                55.7311168647131 * Math.Tanh(2.28577464930468 * (0.434782608695652 * X1 - 1.39130434782609) + 1.5158991094577 * (0.29171528588098 * X2 - 6.66044340723454) + 1.06681716952934 * (0.034441191665232 * X3 - 1.85241949371448) -
                3.13261531675162 * (0.034129692832765 * X4 - 2.19453924914676) - 4.42090683460164 * (0.114285714285714 * X5 - 2.88571428571429) + 1.24008874854564 * (0.121212121212121 * X6 - 3.15757575757576) + 4.39837734642459 *
                (0.071718004805106 * X7 - 2.11471294868577) + 0.6790169328431 * (0.012191702327396 * X8 - 1.00504736476354) - 1.82512703379029 * (0.234466588511137 * X9 - 1.0820633059789) - 1.19920121664919 * (0.027130195093233 * X10 -
                1.02661472138646) + 46.5099051504057 * (2.35294117647059 * X11 - 4.17647058823529) - 3.39743985523064 * (0.038834951456311 * X12 - 2.92233009708738) - 3.29630844026054 * (0.169779286926995 * X13 - 1.22920203735144) +
                3.23345360437958 * (0.032420165342843 * X14 - 1.18252553088021) + 1.70571492624226 * (0.013377926421405 * X15 - 1.04173913043478) - 25.8438360130971) + 29.5694261802156 * Math.Tanh(-1.20102626590183 * (0.434782608695652 *
                X1 - 1.39130434782609) - 1.45669775637102 * (0.29171528588098 * X2 - 6.66044340723454) + 1.03548392650359 * (0.034441191665232 * X3 - 1.85241949371448) - 0.166315759534828 * (0.034129692832765 * X4 - 2.19453924914676) +
                1.17150202927174 * (0.114285714285714 * X5 - 2.88571428571429) - 0.603059272824128 * (0.121212121212121 * X6 - 3.15757575757576) - 1.40519121600442 * (0.071718004805106 * X7 - 2.11471294868577) + 0.413064311120924 *
                (0.012191702327396 * X8 - 1.00504736476354) - 2.2425710297281 * (0.234466588511137 * X9 - 1.0820633059789) + 2.42191134110953 * (0.027130195093233 * X10 - 1.02661472138646) - 16.7983812504167 * (2.35294117647059 * X11 -
                4.17647058823529) - 0.059020476521334 * (0.038834951456311 * X12 - 2.92233009708738) + 12.9701467279431 * (0.169779286926995 * X13 - 1.22920203735144) + 2.94131946309901 * (0.032420165342843 * X14 - 1.18252553088021) -
                0.295166215711799 * (0.013377926421405 * X15 - 1.04173913043478) + 0.803553495031923) + 75.3493574055589) + 0.048752947165561 + 1) / 2;

            //Возвращаем результат
            return result;
        }
    }
}